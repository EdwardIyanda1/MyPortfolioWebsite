!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="089e63a1-7700-43af-89a4-375b83bd1e5d",e._sentryDebugIdIdentifier="sentry-dbid-089e63a1-7700-43af-89a4-375b83bd1e5d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1043],{2687:(e,t,n)=>{n.d(t,{c3:()=>o,e9:()=>c});var a=n(17702),s=n(48678),r=n(65210);let o=100;async function i(e,t){let{projectRef:n,cursor:a,sort:r,name:i}=e;if(void 0===n)throw Error("projectRef is required");let{data:c,error:l}=await (0,s.Jt)("/platform/projects/{ref}/content/folders",{params:{path:{ref:n},query:{type:"sql",cursor:a,limit:o.toString(),sort_by:r,sort_order:"name"===r?"asc":"desc",name:i,visibility:"user"}},signal:t});return l&&(0,s.H4)(l),{...c.data,cursor:c.cursor}}let c=function(e){let{projectRef:t,name:n,sort:s}=e,{enabled:o=!0,...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.q)(r.M.folders(t,{name:n,sort:s}),e=>{let{signal:a,pageParam:r}=e;return i({projectRef:t,cursor:r,name:n,sort:s},a)},{enabled:o&&void 0!==t,getNextPageParam:e=>e.cursor,...c})}},7874:(e,t,n)=>{n.d(t,{I:()=>c});var a=n(17702),s=n(48678),r=n(65210),o=n(2687);async function i(e,t){let{projectRef:n,cursor:a,visibility:r,favorite:i,name:c,sort:l}=e;if(void 0===n)throw Error("projectRef is required for getSqlSnippets");let{data:d,error:u}=await (0,s.Jt)("/platform/projects/{ref}/content",{params:{path:{ref:n},query:{type:"sql",cursor:a,visibility:r,favorite:i,name:c,limit:o.c3.toString(),sort_by:l,sort_order:"name"===l?"asc":"desc"}},signal:t});if(u)throw u;return{cursor:d.cursor,contents:d.data}}let c=function(e){let{projectRef:t,sort:n,name:s,visibility:o,favorite:c}=e,{enabled:l=!0,...d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.q)(r.M.sqlSnippets(t,{sort:n,name:s,visibility:o,favorite:c}),e=>{let{signal:a,pageParam:r}=e;return i({projectRef:t,cursor:r,sort:n,name:s,visibility:o,favorite:c},a)},{enabled:l&&void 0!==t,getNextPageParam:e=>e.cursor,...d})}},28686:(e,t,n)=>{n.d(t,{Jc:()=>m,LW:()=>u,Ob:()=>p,oI:()=>d});var a=n(56947),s=n(32144),r=n(14506),o=n.n(r),i=n(53239),c=n(48678),l=n(79802);async function d(e,t){let{projectRef:n,connectionString:a,schema:s,includeColumns:r=!1,sortByProperty:i="name"}=e;if(!n)throw Error("projectRef is required");let l=new Headers;a&&l.set("x-connection-encrypted",a);let d={include_columns:"".concat(r)};s&&(d.included_schemas=s);let{data:u,error:m}=await (0,c.Jt)("/platform/pg-meta/{ref}/tables",{params:{header:{"x-connection-encrypted":a},path:{ref:n},query:d},headers:l,signal:t});return(!Array.isArray(u)&&m&&(0,c.H4)(m),Array.isArray(u)&&i)?o()(u,e=>e[i]):u}let u=function(e){let{projectRef:t,connectionString:n,schema:s,includeColumns:r}=e,{enabled:o=!0,...i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,a.I)(l.v.list(t,s,r),e=>{let{signal:a}=e;return d({projectRef:t,connectionString:n,schema:s,includeColumns:r},a)},{enabled:o&&void 0!==t,...i})};function m(e){let{projectRef:t,connectionString:n}=e,a=(0,s.jE)();return(0,i.useCallback)((e,s)=>a.fetchQuery({queryKey:l.v.list(t,e,s),queryFn:a=>{let{signal:r}=a;return d({projectRef:t,connectionString:n,schema:e,includeColumns:s},r)}}),[n,t,a])}function p(e){let{projectRef:t,connectionString:n}=e,a=(0,s.jE)();return(0,i.useCallback)((e,s)=>a.prefetchQuery({queryKey:l.v.list(t,e,s),queryFn:a=>{let{signal:r}=a;return d({projectRef:t,connectionString:n,schema:e,includeColumns:s},r)}}),[n,t,a])}},40795:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(80263),s=n(26822),r=n(26699),o=n.n(r),i=n(82457);let c=e=>(0,a.jsx)("span",{className:(0,i.cn)("next-image--dynamic-fill",e.className),"data-sentry-component":"NextImageHandler","data-sentry-source-file":"index.tsx",children:(0,a.jsx)(o(),{...e,className:"rounded-md border",layout:"fill","data-sentry-element":"Image","data-sentry-source-file":"index.tsx"})}),l={mono:e=>(0,a.jsx)("code",{className:"text-sm",children:e.children}),code:e=>(0,a.jsx)(s.N,{...e}),img:e=>c(e),Image:e=>c(e)}},46065:(e,t,n)=>{n.d(t,{m:()=>a});let a={create:()=>["queues","create"],delete:e=>["queues",e,"delete"],purge:e=>["queues",e,"purge"],getMessagesInfinite:(e,t,n)=>["projects",e,"queue-messages",t,n].filter(Boolean),list:e=>["projects",e,"queues"],metrics:(e,t)=>["projects",e,"queue-metrics",t],exposePostgrestStatus:e=>["projects",e,"queue-expose-status"]}},50526:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(80263);n(53239);var s=n(5548),r=n(82457);function o(e){let{icon:t,className:n,size:o}=e,i=(0,s.A)("inputIconContainer");return(0,a.jsx)("div",{className:(0,r.cn)(i.base,i.size[o],n),"data-sentry-component":"InputIconContainer","data-sentry-source-file":"InputIconContainer.tsx",children:t})}},64491:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(80263);n(53239);var s=n(5548),r=n(263);let o={tiny:14,small:16,medium:20,large:24,xlarge:32};function i(e){let{style:t,size:n="medium"}=e,i=(0,s.A)("inputErrorIcon");return(0,a.jsx)("div",{className:i.base,style:t,"data-sentry-component":"InputErrorIcon","data-sentry-source-file":"InputErrorIcon.tsx",children:(0,a.jsx)(r.A,{size:o[n],strokeWidth:2,"data-sentry-element":"AlertCircle","data-sentry-source-file":"InputErrorIcon.tsx"})})}},65210:(e,t,n)=>{n.d(t,{M:()=>a});let a={allContentLists:e=>["projects",e,"content"],infiniteList:(e,t)=>["projects",e,"content-infinite",t],list:(e,t)=>["projects",e,"content",t],sqlSnippets:(e,t)=>["projects",e,"content","sql",t].filter(Boolean),folders:(e,t)=>["projects",e,"content","folders",t].filter(Boolean),folderContents:(e,t,n)=>["projects",e,"content","folders",t,n].filter(Boolean),resource:(e,t)=>["projects",e,"content",t],count:(e,t,n)=>["projects",e,"content","count",t,n].filter(Boolean)}},70847:(e,t,n)=>{n.d(t,{Q:()=>s,i:()=>a});let a=["auth","cron","extensions","information_schema","net","pgsodium","pgsodium_masks","pgbouncer","pgtle","realtime","storage","supabase_functions","supabase_migrations","vault","graphql","graphql_public",n(96622).Lh],s=a.filter(e=>"extensions"!==e)},75099:(e,t,n)=>{n.r(t),n.d(t,{default:()=>tp});var a=n(80263),s=n(25481),r=n(94941),o=n(73451),i=n(20160),c=n(97008),l=n(98923),d=n(20368),u=n(84305),m=n.n(u),p=n(53239),g=n(12532),h=n(40445);let f=()=>{let{commandsState:e}=(0,h.e)(),{commandSections:t}=(0,g.s)(e),n=(0,l.aP)();return n&&(0,d._2)(n)?n.sections:t},x=function(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{commandsState:s}=(0,h.e)(),{registerSection:r}=(0,g.s)(s),o=(0,p.useRef)(null==a?void 0:a.deps);null!=a.enabled||(a.enabled=!0);let i=(0,p.useRef)(a.enabled),c=(0,p.useRef)();(0,p.useMemo)(()=>{if(!m()(o.current,a.deps)||i.current!==a.enabled){var n;null==(n=c.current)||n.call(c),c.current=a.enabled?r(e,t,a):void 0,o.current=a.deps,i.current=a.enabled}},[r,e,t,a]),(0,p.useEffect)(()=>(c.current=a.enabled?r(e,t,a):void 0,()=>{var e;return null==(e=c.current)?void 0:e.call(c)}),[])},v={ACTIONS:"Actions",NAVIGATE:"Navigate",QUERY:"Queries",SUPPORT:"Support",TABLE:"Table Editor",SQL:"SQL Editor",DATABASE:"Database",INTEGRATIONS:"Integrations"};function y(e){return e.slice().sort((e,t)=>{var n,a,s,r;return(null!=(s=null==(n=e.meta)?void 0:n.priority)?s:10)-(null!=(r=null==(a=t.meta)?void 0:a.priority)?r:10)})}let b="Switch branch",j=[];var _=n(35421),w=n(58394),S=n(83207),A=n(69399),N=n(74176),k=n(60045),C=n(7874),I=n(19070),q=n(27528),E=n(85936),H=n(82457),R=n(26822),P=n(44574),T=n(40069);function L(e){let{children:t}=e,{handleTouchStart:n,handleTouchMove:s,handleTouchEnd:r}=(0,P.JY)();return(0,a.jsx)("div",{onTouchStart:n,onTouchMove:s,onTouchEnd:r,"data-sentry-component":"CommandHeader","data-sentry-source-file":"CommandHeader.tsx",children:t})}var M=n(87163);let D=(0,p.forwardRef)((e,t)=>{let{className:n,...r}=e,o=function(e){let t=(0,s.dv)("sm"),n=(0,p.useRef)(t);n.current=t;let a=(0,p.useRef)();return(0,p.useEffect)(()=>{setTimeout(()=>{if(!n.current){var e;null==(e=a.current)||e.focus()}})},[]),t=>{e instanceof Function?e(t):e&&(e.current=t),a.current=t}}(t),i=(0,M.I)(),c=(0,M.G)(),[l,d]=(0,p.useState)(i);(0,p.useEffect)(()=>{d(i)},[i]);let[u,m]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{u||c(l)},[l,u]),(0,a.jsx)(E.G7,{autoFocus:!1,ref:o,value:l,onValueChange:d,placeholder:"Type a command or search...",onCompositionStart:()=>m(!0),onCompositionEnd:()=>m(!1),className:(0,H.cn)("flex h-11 w-full rounded-md bg-transparent px-4 py-7 outline-none","focus:shadow-none focus:ring-transparent","text-base text-foreground-light placeholder:text-foreground-muted disabled:cursor-not-allowed disabled:opacity-50 border-0",n),...r})});D.displayName=E.G7.displayName;var z=n(81260);let G=e=>"action"in e,$=e=>"route"in e,O=e=>(0,H.cn)("cursor-default","select-none","items-center gap-2","rounded-md","text-sm","group","py-3","text-foreground-light","relative","flex",e?"\nbg-transparent\npx-2\ntransition-all\noutline-none\naria-selected:border-overlay\naria-selected:bg-selection/90\naria-selected:shadow-sm\naria-selected:scale-[100.3%]\ndata-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50":"\npx-2\naria-selected:bg-selection/80\naria-selected:backdrop-filter\naria-selected:backdrop-blur-md\ndata-[disabled=true]:pointer-events-none\ndata-[disabled=true]:opacity-50\n"),V=(0,p.forwardRef)((e,t)=>{var n,s,r;let{children:o,className:i,command:c,...l}=e,d=(0,z.x)(),u=(0,P.sU)();return(0,a.jsx)(E.h_,{ref:t,onSelect:G(c)?c.action:$(c)?()=>{c.route.startsWith("http")?(u(!1),window.open(c.route,"_blank","noreferrer,noopener")):d.push(c.route)}:()=>{},value:null!=(r=c.value)?r:c.name,forceMount:c.forceMount,className:(0,H.cn)(O($(c)),i,c.className),...l,children:(0,a.jsxs)("div",{className:"w-full flex flex-row justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 flex-grow items-center",children:[null==(n=c.icon)?void 0:n.call(c),o]}),null==(s=c.badge)?void 0:s.call(c)]})})});V.displayName=E.h_.displayName;let Q=n(45362).wo,U=e=>encodeURIComponent(e);var W=n(28686),B=n(70847);let F="Snippets";function J(){let{ref:e}=(0,s.g)(),{data:t,isLoading:n,isError:r,isSuccess:o}=(0,C.I)({projectRef:e}),i=null==t?void 0:t.pages.flatMap(e=>e.contents),{profile:c}=(0,q.xc)(),l=(0,I.SE)(k.aG.CREATE,"user_content",{resource:{type:"sql",owner_id:null==c?void 0:c.id},subject:{id:null==c?void 0:c.id}});return(0,P.Jb)("xlarge"),(0,a.jsxs)(T.dI,{"data-sentry-element":"CommandWrapper","data-sentry-component":"RunSnippetPage","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsxs)(L,{"data-sentry-element":"CommandHeader","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsx)(T.Qp,{"data-sentry-element":"Breadcrumb","data-sentry-source-file":"SqlEditor.Commands.tsx"}),(0,a.jsx)(D,{autoFocus:!0,"data-sentry-element":"CommandInput","data-sentry-source-file":"SqlEditor.Commands.tsx"})]}),n&&(0,a.jsx)(K,{}),r&&(0,a.jsx)(Y,{}),o&&(!i||0===i.length)&&(0,a.jsx)(X,{projectRef:e,canCreateNew:l}),o&&!!i&&i.length>0&&(0,a.jsx)(Z,{projectRef:e,canCreateNew:l,snippets:i})]})}function K(){return(0,a.jsx)("div",{className:"p-6","data-sentry-component":"LoadingState","data-sentry-source-file":"SqlEditor.Commands.tsx",children:(0,a.jsxs)("p",{className:"text-center",children:[(0,a.jsx)(w.A,{className:"inline-block mr-2 animate-spin","data-sentry-element":"Loader2","data-sentry-source-file":"SqlEditor.Commands.tsx"}),"Loading..."]})})}function Y(){return(0,a.jsx)("div",{className:"p-6","data-sentry-component":"ErrorState","data-sentry-source-file":"SqlEditor.Commands.tsx",children:(0,a.jsxs)("p",{className:"text-center",children:[(0,a.jsx)(S.A,{className:"inline-block mr-2","data-sentry-element":"AlertTriangle","data-sentry-source-file":"SqlEditor.Commands.tsx"}),"Couldn't load snippets"]})})}function X(e){let{projectRef:t,canCreateNew:n}=e,s=(0,N.useRouter)();return(0,a.jsxs)("div",{className:"p-6","data-sentry-component":"EmptyState","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsx)("p",{className:"mb-2 text-center",children:"No snippets found."}),(0,a.jsx)(E.oI,{className:"py-2","data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"SqlEditor.Commands.tsx",children:(0,a.jsx)(E.L$,{"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"SqlEditor.Commands.tsx",children:(0,a.jsx)(E.h_,{id:"create-snippet",className:O(!1),onSelect:()=>s.push("/project/".concat(null!=t?t:"_","/sql/new")),"data-sentry-element":"CommandItem_Shadcn_","data-sentry-source-file":"SqlEditor.Commands.tsx",children:n?"Create new snippet":"Run new SQL"})})})]})}function Z(e){var t;let{projectRef:n,snippets:s,canCreateNew:r}=e,o=(0,N.useRouter)(),i=Q(e=>e.value),c=null==s?void 0:s.find(e=>ee(e)===i),l=(null==c?void 0:c.type)==="sql";return(0,a.jsxs)("div",{className:"w-full flex-grow min-h-0 grid gap-4 md:grid-cols-2","data-sentry-component":"SnippetSelector","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsxs)(E.oI,{className:(0,H.cn)("!h-full min-h-0 max-h-[unset] py-2 overflow-hidden","[&>[cmdk-list-sizer]]:h-full [&>[cmdk-list-sizer]]:flex [&>[cmdk-list-sizer]]:flex-col"),"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[!!s&&s.length>0&&(0,a.jsx)(E.L$,{className:"flex-grow min-h-0 overflow-auto",children:s.map(e=>(0,a.jsx)(E.h_,{id:"".concat(e.id,"-").concat(e.name),className:O(!1),value:ee(e),onSelect:()=>void o.push("/project/".concat(null!=n?n:"_","/sql/").concat(e.id)),children:e.name}))}),r&&(0,a.jsxs)("div",{className:"min-h-fit flex-grow-0",children:[(0,a.jsx)("hr",{className:"mt-4 mb-2 mx-2"}),(0,a.jsx)(E.L$,{forceMount:!0,children:(0,a.jsx)(E.h_,{id:"create-snippet",className:O(!1),onSelect:()=>o.push("/project/".concat(null!=n?n:"_","/sql/new")),forceMount:!0,children:"Create new snippet"})})]})]}),(0,a.jsx)(R.N,{language:"sql",value:l?null==c||null==(t=c.content)?void 0:t.sql:"",wrapperClassName:"hidden md:block",className:"w-full h-full border-0 [&>code]:overflow-scroll [&>code]:block [&>code]:w-full [&>code]:h-full",hideCopy:!0,"data-sentry-element":"CodeBlock","data-sentry-source-file":"SqlEditor.Commands.tsx"})]})}function ee(e){var t;return"sql"!==e.type?"":U("".concat(e.id,"-").concat(e.name,"-").concat(null==e||null==(t=e.content)?void 0:t.sql.slice(0,30))).toLowerCase()}let et="Query a table";function en(){let e=(0,N.useRouter)(),t=(0,c.KT)(),{data:n,isLoading:s,isError:r,isSuccess:o}=(0,W.LW)({projectRef:null==t?void 0:t.ref,connectionString:null==t?void 0:t.connectionString,includeColumns:!0},{select:ea});return(0,a.jsxs)(T.dI,{"data-sentry-element":"CommandWrapper","data-sentry-component":"TableSelector","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsxs)(L,{"data-sentry-element":"CommandHeader","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[(0,a.jsx)(T.Qp,{"data-sentry-element":"Breadcrumb","data-sentry-source-file":"SqlEditor.Commands.tsx"}),(0,a.jsx)(D,{autoFocus:!0,"data-sentry-element":"CommandInput","data-sentry-source-file":"SqlEditor.Commands.tsx"})]}),(0,a.jsxs)(E.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"SqlEditor.Commands.tsx",children:[s&&(0,a.jsx)(K,{}),r&&(0,a.jsx)(Y,{}),o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.xL,{}),(0,a.jsx)(E.L$,{children:null==n?void 0:n.map(n=>(0,a.jsx)(E.h_,{className:O(!1),value:U("".concat(n.schema,".").concat(n.name)),onSelect:()=>{var a,s;e.push("/project/".concat(null!=(a=null==t?void 0:t.ref)?a:"_","/sql/new?content=").concat(encodeURIComponent((s=n,"\nselect ".concat(!s.columns?"*":"\n".concat(s.columns.map((e,t,n)=>"	".concat(e.name)).join(",\n")),"\nfrom ").concat(function(e){let t=es.test(e.schema)?e.schema:'"'.concat(e.schema,'"'),n=es.test(e.name)?e.name:'"'.concat(e.name,'"');return"".concat(t,".").concat(n)}(s),"\n-- where\n-- order by\n-- limit\n;\n  ").trim()))))},children:"".concat(n.schema,".").concat(n.name)},n.id))})]})]})]})}function ea(e){return e.filter(e=>!B.i.includes(e.schema))}let es=/^[a-z_][a-z0-9_$]*$/;var er=n(71147),eo=n(76584),ei=n(41741),ec=n(60562),el=n(57539),ed=n(36094);let eu=e=>{let{children:t,className:n,listRef:s,...r}=e,o=(0,M.I)(),[i,c]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{var e;if(!o)return c(!1);c(!(null==s||null==(e=s.current)?void 0:e.querySelector("[cmdk-item]")))},[o]),i&&(0,a.jsx)("div",{className:(0,H.cn)("py-6 text-center text-sm text-foreground-muted",n),...r,children:t})},em=(0,p.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,a.jsx)(E.L$,{ref:t,className:(0,H.cn)("overflow-hidden py-3 px-2 text-foreground-muted [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5 [&_[cmdk-group-heading]]:text-sm [&_[cmdk-group-heading]]:font-normal [&_[cmdk-group-heading]]:text-foreground-muted",n),...s})});function ep(e){let{children:t,text:n,query:s,...r}=e,o=null!=n?n:p.Children.toArray(t)[0];if("string"!=typeof o)return o;let i=o.toLowerCase().indexOf(s.toLowerCase());return -1===i?(0,a.jsx)("span",{...r,children:o}):(0,a.jsxs)("span",{...r,"data-sentry-component":"TextHighlighterBase","data-sentry-source-file":"TextHighlighter.tsx",children:[o.substring(0,i),(0,a.jsx)("span",{className:"text-foreground",children:o.substring(i,i+s.length)}),o.substring(i+s.length)]})}function eg(e){let t=(0,M.I)();return(0,a.jsx)(ep,{query:t,...e,"data-sentry-element":"TextHighlighterBase","data-sentry-component":"TextHighlighter","data-sentry-source-file":"TextHighlighter.tsx"})}em.displayName=E.L$.displayName;let eh=(0,p.forwardRef)((e,t)=>{let{className:n,...s}=e,r=f(),o=(0,M.I)(),i=(0,p.useRef)(void 0),c=e=>i.current=e;return(0,a.jsxs)(E.oI,{ref:e=>{t&&("function"==typeof t?t(e):t.current=e),c(e)},className:(0,H.cn)("max-h-[initial] overflow-y-auto overflow-x-hidden bg-transparent",n),...s,children:[(0,a.jsx)(eu,{listRef:i,children:"No results found."}),r.map(e=>e.commands.every(e=>e.defaultHidden)&&!o?null:(0,a.jsx)(em,{heading:e.name,forceMount:e.forceMount,children:e.commands.filter(e=>!e.defaultHidden||o).map(e=>(0,a.jsx)(V,{command:e,children:(0,a.jsx)(eg,{children:e.name})},e.id))},e.id))]})});eh.displayName=E.oI.displayName;var ef=n(64072);let ex="/dashboard",ev=function(){let{enabled:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};x("Updates",[{id:"changelog",name:"Changelog",route:ex?"https://supabase.com/changelog":"/changelog",icon:()=>(0,a.jsx)(ef.A,{})}],{enabled:e})};var ey=n(14287),eb=n(70883),ej=n(68657),e_=n(2286),ew=n(40795),eS=n(37263),eA=n(58173),eN=n(67743),ek=function(e){return e.User="user",e.Assistant="assistant",e}(ek||{}),eC=function(e){return e.Pending="pending",e.InProgress="in-progress",e.Complete="complete",e}(eC||{});let eI=(e,t)=>{let n=[...e],{type:a}=t;switch(a){case"new":{let{message:e}=t;n.push(e);break}case"update":{let{index:e,message:a}=t;n[e]&&(n[e]=Object.assign({},n[e],a));break}case"append-content":{let{index:e,content:a,idempotencyKey:s}=t,r=n[e];if(!r||r.idempotencyKey===s)break;r.idempotencyKey=s,n[e]=Object.assign({},r,{content:r.content+=a});break}case"finalize-with-sources":{let{index:e}=t,a=n[e];if(a&&a.content){let{cleanedContent:t,sources:s}=function(e){let t=e.match(/### Sources\s*(?:\n((?:- [^\n]+\n?)*))?\s*$/),n=e,a=[];if(t){for(let e of(t[1]||"").split("\n").filter(e=>e.trim().startsWith("- "))){let t=e.replace(/^- /,"").trim();t&&t.startsWith("/")&&a.push({path:t,url:"https://supabase.com/docs".concat(t)})}let s=e.lastIndexOf("### Sources");-1!==s&&(n=e.substring(0,s).trim())}return{cleanedContent:n,sources:a}}(a.content);n[e]=Object.assign({},a,{status:eC.Complete,content:t,sources:s.length>0?s:void 0})}else n[e]=Object.assign({},a,{status:eC.Complete});break}case"reset":n=[];break;default:throw Error("Unknown message action '".concat(a,"'"))}return n},eq=e=>{let{messageTemplate:t=e=>e,setIsLoading:n}=e,a=(0,p.useRef)(),s=(0,p.useRef)(0),[r,o]=(0,p.useState)(!1),[i,c]=(0,p.useState)(!1),[l,d]=(0,p.useState)(1),[u,m]=(0,p.useReducer)(eI,[]);return{submit:(0,p.useCallback)(async e=>{m({type:"new",message:{status:eC.Complete,role:ek.User,content:e}}),m({type:"new",message:{status:eC.Pending,role:ek.Assistant,content:""}}),o(!1),c(!1),null==n||n(!0);let r=new eN.y("".concat(ex,"/api/ai/docs"),{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhndWloeHV6cWlid3hqbmlteGV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTgzNzc1MTgsImV4cCI6MjAzMzk1MzUxOH0.aIqjQ9V7djMxYit-DT1fYNV_VWMHSqldh_18XfX2_BE",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhndWloeHV6cWlid3hqbmlteGV2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTgzNzc1MTgsImV4cCI6MjAzMzk1MzUxOH0.aIqjQ9V7djMxYit-DT1fYNV_VWMHSqldh_18XfX2_BE"),"Content-Type":"application/json"},payload:JSON.stringify({messages:u.filter(e=>{let{status:t}=e;return t===eC.Complete}).map(e=>{let{role:t,content:n}=e;return{role:t,content:n}}).concat({role:ek.User,content:t(e)})})});function i(e){null==n||n(!1),o(!1),c(!0),console.error(e)}r.addEventListener("error",i),r.addEventListener("message",function(e){try{if(null==n||n(!1),"[DONE]"===e.data){o(!1),m({type:"finalize-with-sources",index:l}),d(e=>e+2);return}m({type:"update",index:l,message:{status:eC.InProgress}}),o(!0);let[{delta:{content:t}}]=JSON.parse(e.data).choices;t&&m({type:"append-content",index:l,idempotencyKey:s.current++,content:t})}catch(e){i(e)}}),r.stream(),a.current=r,null==n||n(!0)},[l,u,t]),reset:function(){var e;null==(e=a.current)||e.close(),a.current=void 0,o(!1),c(!1),d(1),m({type:"reset"})},messages:u,isResponding:r,hasError:i}};var eE=n(47296),eH=n(96773);let eR=e=>{let{className:t}=e;return(0,a.jsxs)(eH.Fc,{className:(0,H.cn)("!m-0",t),variant:"warning","data-sentry-element":"Alert_Shadcn_","data-sentry-component":"AiWarning","data-sentry-source-file":"AiWarning.tsx",children:[(0,a.jsx)(eE.A,{strokeWidth:1.5,size:18,className:"text-foreground-muted","data-sentry-element":"Microscope","data-sentry-source-file":"AiWarning.tsx"}),(0,a.jsx)(eH.XL,{"data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"AiWarning.tsx",children:"Supabase AI is experimental and may produce incorrect answers."}),(0,a.jsx)(eH.TN,{"data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"AiWarning.tsx",children:(0,a.jsx)("p",{children:"Always verify the output before executing."})})]})},eP=["How do I get started with Supabase?","How do I run Supabase locally?","How do I connect to my database?","How do I run migrations? ","How do I listen to changes in a table?","How do I set up authentication?"],eT=()=>{let e=(0,M.G)(),t=(0,s.dv)("sm");(0,P.Jb)("xlarge");let[n,r]=(0,p.useState)(!1),{submit:o,reset:i,messages:c,isResponding:l,hasError:d}=eq({setIsLoading:r}),u=(0,p.useCallback)(t=>{e(""),o(t)},[o]),m=(0,p.useCallback)(()=>{e(""),i()},[i]);return(0,a.jsxs)(T.dI,{className:(0,H.cn)("flex flex-col",!t&&"[&_[cmdk-input-wrapper]]:border-b-0 [&_[cmdk-input-wrapper]]:border-t [&_[cmdk-input-wrapper]]:border-solid [&_[cmdk-input-wrapper]]:border-bg-control"),"data-sentry-element":"CommandWrapper","data-sentry-component":"DocsAiPage","data-sentry-source-file":"DocsAiPage.tsx",children:[(0,a.jsxs)(L,{"data-sentry-element":"CommandHeader","data-sentry-source-file":"DocsAiPage.tsx",children:[(0,a.jsx)(T.Qp,{"data-sentry-element":"Breadcrumb","data-sentry-source-file":"DocsAiPage.tsx"}),t&&(0,a.jsx)(eL,{submit:u,reset:m,messages:c,isLoading:n,isResponding:l})]}),(0,a.jsxs)("div",{className:(0,H.cn)("flex-grow min-h-0 overflow-auto"),children:[!d&&c.length>0&&(0,a.jsx)(eM,{messages:c}),!d&&0===c.length&&(0,a.jsx)(eD,{handleSubmit:u}),d&&(0,a.jsx)(ez,{handleReset:m})]}),!t&&(0,a.jsx)(eL,{submit:u,reset:m,messages:c,isLoading:n,isResponding:l}),c.length>0&&!d&&(0,a.jsx)(eR,{className:t?"rounded-b-none":"rounded-t-none"})]})};function eL(e){let{submit:t,reset:n,messages:s,isLoading:r,isResponding:o,className:i}=e,c=(0,M.I)(),l=(0,p.useRef)(c),d=(0,M.G)();(0,p.useEffect)(()=>(c&&t(c),n),[]);let[u,m]=(0,p.useState)(""),[g,h]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{c!==l.current?(m(c),l.current=c):g||(d(u),l.current=u)},[u,c,g]),!function(e){let{stack:t,enable:n=!0}=e,[a,s]=(0,p.useState)(0),r=(0,M.G)(),o=(0,p.useCallback)(e=>{var a;n&&(r(null!=(a=t[e])?a:""),s(e))},[]);(0,p.useEffect)(()=>{function e(e){switch(e.key){case"ArrowUp":return o(Math.max(a-1,0));case"ArrowDown":return o(Math.min(a+1,t.length-1));default:return}}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o,t])}({enable:!o,stack:s.filter(e=>{let{role:t}=e;return t===ek.User}).map(e=>{let{content:t}=e;return t})}),(0,a.jsx)(D,{className:(0,H.cn)("w-full h-11","border-none outline-none bg-transparent rounded-none rounded-t-md px-4 py-7","flex","text-base text-foreground-light","focus:ring-0 focus:shadow-none focus:ring-transparent","focus-visible:ring-0 focus-visible:shadow-none focus-visible:ring-transparent","placeholder:text-foreground-muted","disabled:cursor-not-allowed disabled:opacity-50",i),placeholder:r||o?"Waiting on an answer...":"Ask Supabase AI a question...",value:u,onValueChange:m,onCompositionStart:()=>h(!0),onCompositionEnd:()=>h(!1),onKeyDown:e=>{if("Enter"===e.key&&c&&!r&&!o&&!g)return t(c)},"data-sentry-element":"CommandInput","data-sentry-component":"PromptInput","data-sentry-source-file":"DocsAiPage.tsx"})}function eM(e){let{messages:t}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.oI,{"data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"DocsAiPage.tsx"}),(0,a.jsx)("div",{className:(0,H.cn)("flex-grow min-h-0 overflow-auto p-4","grid gap-6 md:grid-cols-[max-content,1fr] grid-rows-[max-content]"),children:t.map((e,t)=>{switch(e.role){case ek.User:return(0,a.jsxs)(p.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:(0,H.cn)("w-7 h-7","border border-muted bg-background shadow-sm rounded-full","flex items-center justify-center","text-foreground-lighter"),children:(0,a.jsx)(eb.A,{strokeWidth:1.5,size:16})}),(0,a.jsx)("span",{className:"font-mono text-sm text-foreground-muted uppercase tracking-widest md:hidden",children:"You"})]}),(0,a.jsx)("div",{className:"prose text-foreground-lighter",children:e.content})]},t);case ek.Assistant:return(0,a.jsxs)(p.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center md:items-start gap-4",children:[(0,a.jsx)(ey.M,{className:"ml-0.5",loading:e.status===eC.Pending||e.status===eC.InProgress,allowHoverEffect:!0}),(0,a.jsx)("span",{className:"font-mono text-sm text-foreground-muted uppercase tracking-widest md:hidden",children:"Supabase AI"})]}),(0,a.jsxs)("div",{children:[e.status===eC.Pending&&(0,a.jsx)("span",{className:"inline-block h-[1lh] w-[0.8lh] mt-1 bg-border-strong animate-bounce"}),(0,a.jsx)(ej.o,{remarkPlugins:[e_.A],components:{...ew.A,a:e=>(0,a.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer"})},className:"prose dark:prose-dark break-words",children:e.content}),e.sources&&e.sources.length>0&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-border-muted",children:[(0,a.jsx)("p",{className:"text-sm text-foreground-muted mb-2",children:"Sources:"}),(0,a.jsx)("ul",{className:"space-y-1",children:e.sources.map((e,t)=>(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-brand hover:underline",children:e.url})},t))})]})]})]},t)}})})]})}function eD(e){let{handleSubmit:t}=e,n=(0,M.I)();return(0,a.jsx)(E.oI,{className:"max-h-[unset]","data-sentry-element":"CommandList_Shadcn_","data-sentry-component":"EmptyState","data-sentry-source-file":"DocsAiPage.tsx",children:(0,a.jsx)(E.L$,{heading:"Examples",className:(0,H.cn)("text-border-strong","[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5","[&_[cmdk-group-heading]]:text-sm [&_[cmdk-group-heading]]:font-normal [&_[cmdk-group-heading]]:text-foreground-muted"),"data-sentry-element":"CommandGroup_Shadcn_","data-sentry-source-file":"DocsAiPage.tsx",children:eP.map(e=>{let s=e.replace(/\s+/g,"_");return(0,a.jsxs)(E.h_,{className:O(!1),onSelect:()=>{n||t(e)},children:[(0,a.jsx)(ey.M,{}),e]},s)})})})}function ez(e){let{handleReset:t}=e;return(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center gap-2 mt-4","data-sentry-component":"ErrorState","data-sentry-source-file":"DocsAiPage.tsx",children:[(0,a.jsx)(eA.kW,{variant:"warning","data-sentry-element":"StatusIcon","data-sentry-source-file":"DocsAiPage.tsx"}),(0,a.jsx)("p",{className:"text-sm text-foreground text-center",children:"Sorry, looks like Supabase AI is having a hard time!"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter text-center",children:"Please try again in a bit."}),(0,a.jsx)(eS.$,{size:"tiny",type:"default",onClick:t,"data-sentry-element":"Button","data-sentry-source-file":"DocsAiPage.tsx",children:"Try again?"})]})}let eG={PAGE_NAME:"Ask Supabase AI",SECTION_NAME:"Docs"},e$=e=>e,eO=function(){let{modify:e=e$,options:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.R3)();(0,l.Q4)(eG.PAGE_NAME,{type:d.g6.Component,component:eT}),x(eG.SECTION_NAME,[{id:"ai-docs",name:"Ask Supabase AI",action:()=>{n(eG.PAGE_NAME,!0)},icon:()=>(0,a.jsx)(ey.M,{})}].map(e),t)};var eV=n(24101),eQ=n(57728),eU=n(18567),eW=n(37444),eB=n(56537);let eF=["How do I get started with Supabase?","How do I run Supabase locally?","How do I connect to my database?","How do I run migrations? ","How do I listen to changes in a table?","How do I set up authentication?"],eJ=()=>(0,a.jsx)(eQ.A,{strokeWidth:1.5,className:(0,H.cn)("-left-4","opacity-0","text-foreground-muted","group-aria-selected:scale-[101%] group-aria-selected:opacity-100 group-aria-selected:left-0","transition"),"data-sentry-element":"ChevronRight","data-sentry-component":"ChevronArrow","data-sentry-source-file":"DocsSearchPage.tsx"}),eK=e=>(0,a.jsx)("div",{className:(0,H.cn)("w-6 h-6","bg-surface-100 border rounded","flex items-center justify-center","text-foreground-muted","group-aria-selected:bg-surface-200 group-aria-selected:text-foreground-lighter group-aria-selected:[&_svg]:scale-[103%]","transition"),...e,"data-sentry-component":"IconContainer","data-sentry-source-file":"DocsSearchPage.tsx"}),eY=()=>{let{searchState:e,handleDocsSearch:t,handleDocsSearchDebounced:n,resetSearch:r}=(0,s.J5)(),o=(0,P.sU)(),i=(0,M.G)(),c=(0,M.I)(),l=(0,p.useRef)(!0),d=(0,p.useRef)(null),u=(0,z.x)();async function m(e,t){switch(e){case s.by.Markdown:case s.by.Reference:ex?window.open("https://supabase.com/docs".concat(t),"_blank","noreferrer,noopener"):u.push("/docs".concat(t)),o(!1);break;case s.by.Integration:ex?window.open("https://supabase.com".concat(t),"_blank","noreferrer,noopener"):u.push(t),o(!1);break;case s.by.GithubDiscussion:window.open(t,"_blank","noreferrer,noopener"),o(!1);break;default:throw Error("Unknown page type '".concat(e,"'"))}}let g="fullResults"===e.status||"partialResults"===e.status||"loading"===e.status&&e.staleResults.length>0;function h(){i(""),r()}return(0,p.useEffect)(()=>{l.current?(c&&t(c),l.current=!1):c?n(c):r()},[c,t,n]),(0,p.useEffect)(()=>{var e;let a=e=>{"Enter"===e.key&&document.activeElement===d.current&&c&&!g&&(e.preventDefault(),n.cancel(),t(c))};return null==(e=d.current)||e.addEventListener("keydown",a),()=>{var e;return null==(e=d.current)?void 0:e.removeEventListener("keydown",a)}},[c,g]),(0,a.jsxs)(T.dI,{"data-sentry-element":"CommandWrapper","data-sentry-component":"DocsSearchPage","data-sentry-source-file":"DocsSearchPage.tsx",children:[(0,a.jsxs)(L,{"data-sentry-element":"CommandHeader","data-sentry-source-file":"DocsSearchPage.tsx",children:[(0,a.jsx)(T.Qp,{"data-sentry-element":"Breadcrumb","data-sentry-source-file":"DocsSearchPage.tsx"}),(0,a.jsx)(D,{placeholder:"Search...",ref:d,"data-sentry-element":"CommandInput","data-sentry-source-file":"DocsSearchPage.tsx"})]}),(0,a.jsxs)(E.oI,{className:"max-h-[initial]","data-sentry-element":"CommandList_Shadcn_","data-sentry-source-file":"DocsSearchPage.tsx",children:[g&&("results"in e?e.results:e.staleResults).map((e,t)=>(0,a.jsxs)(E.L$,{heading:"",value:"".concat(U(e.title),"-group-index-").concat(t),forceMount:!0,className:"overflow-hidden py-3 px-2 text-border-strong [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5 [&_[cmdk-group-heading]]:text-sm [&_[cmdk-group-heading]]:font-normal [&_[cmdk-group-heading]]:text-foreground-muted",children:[(0,a.jsxs)(E.h_,{value:"".concat(U(e.title),"-item-index-").concat(t),onSelect:()=>{m(e.type,e.path)},forceMount:!0,className:(0,H.cn)(O(!0),"border border-overlay/90"),children:[(0,a.jsxs)("div",{className:"grow flex gap-3 items-center",children:[(0,a.jsx)(eK,{children:function(e){switch(e.type){case s.by.Markdown:case s.by.Reference:case s.by.Integration:return(0,a.jsx)(eV.A,{strokeWidth:1.5,className:"!mr-0 !w-4 !h-4"});case s.by.GithubDiscussion:return(0,a.jsx)(eU.A,{strokeWidth:1.5,className:"!mr-0 !w-4 !h-4"});default:throw Error("Unknown page type '".concat(e.type,"'"))}}(e)}),(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsx)(eg,{children:e.title}),(e.description||e.subtitle)&&(0,a.jsx)("div",{className:"text-xs text-foreground-muted",children:e.description||e.subtitle})]})]}),(0,a.jsx)(eJ,{})]},"".concat(e.path,"-item")),e.sections.length>0&&(0,a.jsx)("div",{className:"border-l border-muted ml-3 pt-3",children:e.sections.map((t,n)=>(0,a.jsxs)(E.h_,{className:(0,H.cn)(O(!0),"border border-overlay/90","ml-3 mb-3"),onSelect:()=>{m(e.type,function(e,t){var n,a;switch(e.type){case s.by.Markdown:case s.by.GithubDiscussion:return"".concat(e.path,"#").concat(null!=(n=t.slug)?n:"");case s.by.Reference:return"".concat(e.path,"/").concat(null!=(a=t.slug)?a:"");case s.by.Integration:return e.path;default:throw Error("Unknown page type '".concat(e.type,"'"))}}(e,t))},value:"".concat(U(e.title),"__").concat(U(t.heading),"-item-index-").concat(n),forceMount:!0,children:[(0,a.jsxs)("div",{className:"grow flex gap-3 items-center",children:[(0,a.jsx)(eK,{children:function(e){switch(e.type){case s.by.Markdown:case s.by.Reference:case s.by.Integration:return(0,a.jsx)(eW.A,{strokeWidth:1.5,className:"!mr-0 !w-4 !h-4"});case s.by.GithubDiscussion:return(0,a.jsx)(eB.A,{strokeWidth:1.5,className:"!mr-0 !w-4 !h-4"});default:throw Error("Unknown page type '".concat(e.type,"'"))}}(e)}),(0,a.jsxs)("div",{className:"flex flex-col gap-0",children:[(0,a.jsx)("cite",{children:(0,a.jsx)(eg,{className:"not-italic text-[10px] rounded-full px-2 py-1 bg-surface-300 text-foreground-muted",children:e.title})}),t.heading&&(0,a.jsx)(eg,{children:t.heading})]})]}),(0,a.jsx)(eJ,{})]},"".concat(e.path,"__").concat(t.heading,"-item")))})]},"".concat(e.path,"-group"))),"initial"===e.status&&(0,a.jsx)(E.L$,{className:"overflow-hidden py-3 px-2 text-border-strong [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5 [&_[cmdk-group-heading]]:text-sm [&_[cmdk-group-heading]]:font-normal [&_[cmdk-group-heading]]:text-foreground-muted",children:eF.map(e=>{let n=e.replace(/\s+/g,"_");return(0,a.jsxs)(E.h_,{className:O(!1),disabled:g,onSelect:()=>{c||(t(e),i(e))},children:[(0,a.jsx)(eo.A,{}),e]},n)})}),"loading"===e.status&&0===e.staleResults.length&&(0,a.jsxs)("div",{className:"flex items-center gap-3 my-4 justify-center",children:[(0,a.jsx)(w.A,{className:"animate animate-spin text-foreground-muted",size:14}),(0,a.jsx)("p",{className:"text-sm text-foreground-muted text-center",children:"Searching for results"})]}),"noResults"===e.status&&(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center gap-6 mt-4 text-foreground-light",children:[(0,a.jsx)(eA.kW,{variant:"default"}),(0,a.jsx)("p",{className:"text-sm text-foreground-light text-center",children:"No results found."}),(0,a.jsx)(eS.$,{size:"tiny",type:"default",onClick:h,children:"Try again?"})]}),"error"===e.status&&(0,a.jsxs)("div",{className:"p-6 flex flex-col items-center gap-6 mt-4",children:[(0,a.jsx)(eA.kW,{variant:"warning"}),(0,a.jsx)("p",{className:"text-lg text-foreground-light",children:"Sorry, looks like we're having some issues with search!"}),(0,a.jsx)("p",{className:"text-sm text-foreground-lighter",children:"Please try again in a bit."}),(0,a.jsx)(eS.$,{size:"tiny",type:"default",onClick:h,children:"Try again?"})]})]})]})},eX={PAGE_NAME:"Docs search",SECTION_NAME:"Docs"},eZ=e=>e,e0=function(){let{modify:e=eZ,options:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.R3)();(0,l.Q4)(eX.PAGE_NAME,{type:d.g6.Component,component:eY}),x(eX.SECTION_NAME,[{id:"search-docs",name:"Search the docs",action:()=>{n(eX.PAGE_NAME,!0)},icon:()=>(0,a.jsx)(eV.A,{})}].map(e),t)};var e1=n(21530),e3=n(66810),e2=n(71085),e4=n(45172),e6=n(796);let e5=[{name:"System",value:"system"},{name:"Dark",value:"dark"},{name:"Classic dark",value:"classic-dark"},{name:"Light",value:"light"}],e7="Switch theme",e8=function(){let{options:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,P.sU)(),n=(0,l.R3)(),{setTheme:s}=(0,e6.D)();(0,l.Q4)(e7,{type:d.g6.Commands,sections:[{id:"switch-theme",name:"Switch theme",commands:e5.filter(e=>{let{name:t}=e;return"System"===t||"Light"===t||"Dark"===t}).map(e=>({id:"switch-theme-".concat(e.value),name:e.name,action:()=>{s(e.value),t(!1)},icon:()=>"System"===e.name?(0,a.jsx)(e1.A,{}):"Light"===e.name?(0,a.jsx)(e3.A,{}):(0,a.jsx)(e2.A,{})}))}]}),x("Theme",[{id:"switch-theme",name:"Switch theme",action:()=>n(e7),defaultHidden:!0,icon:()=>(0,a.jsx)(e4.A,{})}],e)};var e9=n(70295),te=n(41804),tt=n(37356),tn=n(72470);let ta="API Keys";var ts=n(94248),tr=n(3385),to=n(67463),ti=n(32912),tc=n(49770);let tl="Switch project",td="Configure organization";var tu=n(62244);let tm=()=>{let e=(0,p.useMemo)(()=>[{id:"support",name:"Support",route:"https://www.supabase.com/support",icon:()=>(0,a.jsx)(tu.A,{})},{id:"system-status",name:"System Status",value:"Support: System Status",route:"https://status.supabase.com",icon:()=>(0,a.jsx)(tu.A,{})},{id:"github-discussions",name:"GitHub Discussions",value:"Support: GitHub Discussions",route:"https://github.com/orgs/supabase/discussions",icon:()=>(0,a.jsx)(tu.A,{}),defaultHidden:!0}],[]);x(v.SUPPORT,e,{enabled:s.pe})};function tp(){var e;!function(){let e=(0,P.sU)(),t=(0,l.R3)(),n=(0,c.KT)(),s=(null==n?void 0:n.ref)||"_",{data:r}=(0,te.Gm)({projectRef:null==n?void 0:n.ref},{enabled:!!n}),{anonKey:o,serviceKey:i}=(0,te.d6)(r),u=(0,p.useMemo)(()=>[n&&o&&{id:"anon-key",name:"Copy anonymous API key",action:()=>{var t;(0,tt.l)(null!=(t=o.api_key)?t:""),e(!1)},badge:()=>(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)(tn.E,{children:["Project: ",null==n?void 0:n.name]}),(0,a.jsx)(tn.E,{children:"Public"})]}),icon:()=>(0,a.jsx)(e9.A,{})},n&&i&&{id:"service-key",name:"Copy service API key",action:()=>{var t;(0,tt.l)(null!=(t=i.api_key)?t:""),e(!1)},badge:()=>(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)(tn.E,{children:["Project: ",null==n?void 0:n.name]}),(0,a.jsx)(tn.E,{variant:"destructive",children:"Secret"})]}),icon:()=>(0,a.jsx)(e9.A,{})},!(o||i)&&{id:"api-keys-project-settings",name:"See API keys in Project Settings",route:"/project/".concat(s,"/settings/api"),icon:()=>(0,a.jsx)(e9.A,{})}].filter(Boolean),[o,i,n,e]);(0,l.Q4)(ta,{type:d.g6.Commands,sections:[{id:"api-keys",name:"API keys",commands:u}]},{deps:[u],enabled:!!n}),x(v.ACTIONS,[{id:"api-keys",name:"Get API keys",action:()=>t(ta),icon:()=>(0,a.jsx)(e9.A,{})}],{enabled:!!n,orderSection:y,sectionMeta:{priority:3}})}(),function(){var e,t,n;let s=(0,P.sU)(),r=(0,c.KT)(),{data:o}=(0,te.Gm)({projectRef:null==r?void 0:r.ref},{enabled:!!r}),i=null!=(n=null==o||null==(e=o.app_config)?void 0:e.protocol)?n:"https",l=null==o||null==(t=o.app_config)?void 0:t.endpoint,d=l?"".concat(i,"://").concat(l):void 0;x(v.ACTIONS,[{id:"api-url",name:"Copy API URL",action:()=>{(0,tt.l)(null!=d?d:""),s(!1)},icon:()=>(0,a.jsx)(ts.A,{}),badge:()=>(0,a.jsxs)(tn.E,{children:["Project: ",null==r?void 0:r.name]})}],{enabled:!!r,deps:[d,r],orderSection:y,sectionMeta:{priority:3}})}(),function(e){var t;let n=(0,c.KT)(),s=(null==n?void 0:n.ref)||"_";x(v.TABLE,[{id:"create-table",name:"Create new table",route:"/project/".concat(s,"/editor?create=table"),icon:()=>(0,a.jsx)(A.A,{})}],{...void 0,deps:[s],enabled:((t=void 0,true),!!n),orderSection:y,sectionMeta:{priority:3}})}();let t=(0,l.R3)(),{data:n}=(0,ti.el)({enabled:s.pe}),u=(0,p.useMemo)(()=>(null!=n?n:[]).map(e=>{let{name:t,ref:n}=e;return{name:t,ref:n}}),[n]);(0,l.Q4)(tl,{type:d.g6.Commands,sections:[{id:"switch-project",name:"Switch project",commands:u.map(e=>{let{name:t,ref:n}=e;return{id:"project-".concat(n),name:t,value:"".concat(t," (").concat(n,")"),route:"/project/".concat(n),icon:()=>(0,a.jsx)(r.A,{})}})}]},{deps:[u],enabled:!!u&&u.length>0}),x(v.ACTIONS,[{id:"switch-project",name:"Switch project",value:"Switch project, Change project, Select project",action:()=>t(tl),icon:()=>(0,a.jsx)(tr.A,{})}],{enabled:!!u&&u.length>0});let m=(0,l.R3)(),{data:g}=(0,tc.Ad)({enabled:s.pe});(0,l.Q4)(td,{type:d.g6.Commands,sections:[{id:"configure-organization",name:"Configure organization",commands:null!=(e=null==g?void 0:g.map(e=>{let{name:t,slug:n}=e;return{id:"organization-".concat(n),name:t,value:"".concat(t," (").concat(n,")"),route:"/org/".concat(n,"/general"),icon:()=>(0,a.jsx)(to.A,{})}}))?e:[]}]},{deps:[g],enabled:!!g&&g.length>0}),x(v.ACTIONS,[{id:"configure-organization",name:"Configure organization",value:"Configure organization, Change organization, Select organization",action:()=>m(td),icon:()=>(0,a.jsx)(to.A,{})}],{enabled:!!g&&g.length>0}),function(e){var t;let n=(0,c.KT)(),s=(0,l.R3)(),r=(0,P.g0)(),o=(0,p.useRef)(r),i=r&&!o.current;o.current=r;let u=(0,W.Ob)({projectRef:null==n?void 0:n.ref,connectionString:null==n?void 0:n.connectionString});(0,p.useEffect)(()=>{n&&i&&u(void 0,!0)},[n,u,i]),(0,l.Q4)(et,{type:d.g6.Component,component:en},{enabled:!!n}),x(v.SQL,[{id:"query-table",name:"Query a table",icon:()=>(0,a.jsx)(A.A,{}),action:()=>s(et)}],{...void 0,enabled:((t=void 0,true),!!n)})}(),function(){let e=(0,l.R3)(),t=(0,c.KT)(),n=(null==t?void 0:t.is_branch_enabled)===!0,{data:s}=(0,i.A)({projectRef:(null==t?void 0:t.parent_project_ref)||(null==t?void 0:t.ref)},{enabled:n});null!=s||(s=j),(0,l.Q4)(b,{type:d.g6.Commands,sections:[{id:"switch-branch",name:"Switch branch",commands:s.map(e=>({id:"branch-".concat(e.id),name:e.name,route:"/project/".concat(e.project_ref),icon:()=>(0,a.jsx)(r.A,{})}))}]},{enabled:n&&s.length>0,deps:[s]}),x(v.ACTIONS,[{id:"switch-branch",name:"Switch branch",value:"Switch branch, Change branch, Select branch",action:()=>e(b),icon:()=>(0,a.jsx)(o.A,{})}],{enabled:n&&s.length>0,orderSection:y,sectionMeta:{priority:3}})}();let h=(0,c.KT)(),f=(0,l.R3)();(0,l.Q4)(F,{type:d.g6.Component,component:()=>(0,a.jsx)(J,{})},{enabled:!!h}),x(v.SQL,[{id:"run-snippet",name:"Run snippet",icon:()=>(0,a.jsx)(_.A,{}),action:()=>f(F)}],{enabled:!!h,orderSection:y,sectionMeta:{priority:3}});let w=(0,s.DB)();return!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.TABLE,[{id:"view-tables",name:"View your tables",route:"/project/".concat(t,"/editor"),icon:()=>(0,a.jsx)(A.A,{})}],{...e,deps:[t],orderSection:y,sectionMeta:{priority:3}}),x(v.NAVIGATE,[{id:"nav-table-editor",name:"Table Editor",route:"/project/".concat(t,"/editor"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-sql-editor",name:"SQL Editor",route:"/project/".concat(t,"/sql"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.QUERY,[{id:"run-sql",name:"Run SQL",route:"/project/".concat(t,"/sql/new"),icon:()=>(0,a.jsx)(_.A,{})}],{...e,deps:[t],orderSection:y,sectionMeta:{priority:2}}),x(v.NAVIGATE,[{id:"nav-database-tables",name:"Tables",value:"Database: Tables",route:"/project/".concat(t,"/database/tables"),defaultHidden:!0},{id:"nav-database-triggers",name:"Triggers",value:"Database: Triggers",route:"/project/".concat(t,"/database/triggers"),defaultHidden:!0},{id:"nav-database-functions",name:"Functions",value:"Database: Functions",route:"/project/".concat(t,"/database/functions"),defaultHidden:!0},{id:"nav-database-extensions",name:"Extensions",value:"Database: Extensions",route:"/project/".concat(t,"/database/extensions"),defaultHidden:!0},{id:"nav-database-roles",name:"Roles",value:"Database: Roles",route:"/project/".concat(t,"/database/roles"),defaultHidden:!0},{id:"nav-database-replication",name:"Replication",value:"Database: Replication",route:"/project/".concat(t,"/database/replication"),defaultHidden:!0},{id:"nav-database-hooks",name:"Webhooks",value:"Database: Webhooks",route:"/project/".concat(t,"/integrations/hooks"),defaultHidden:!0},{id:"nav-database-backups",name:"Backups",value:"Database: Backups",route:"/project/".concat(t,"/database/backups/scheduled"),defaultHidden:!0},{id:"nav-database-wrappers",name:"Wrappers",value:"Database: Wrappers",route:"/project/".concat(t,"/integrations/wrappers"),defaultHidden:!0},{id:"nav-database-migrations",name:"Migrations",value:"Database: Migrations",route:"/project/".concat(t,"/database/migrations"),defaultHidden:!0}],{...e,deps:[t]}),x(v.DATABASE,[{id:"run-schema-visualizer",name:"View your schemas",route:"/project/".concat(t,"/database/schemas"),icon:()=>(0,a.jsx)(eo.A,{})},{id:"run-view-database-functions",name:"View and create functions",route:"/project/".concat(t,"/database/functions"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-triggers",name:"View and create triggers",route:"/project/".concat(t,"/database/triggers"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-enumerated-types",name:"View and create enumerated types",route:"/project/".concat(t,"/database/types"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-extensions",name:"View your extensions",route:"/project/".concat(t,"/database/extensions"),icon:()=>(0,a.jsx)(ec.A,{})},{id:"run-view-database-indexes",name:"View and create indexes",route:"/project/".concat(t,"/database/indexes"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-roles",name:"View your roles",route:"/project/".concat(t,"/database/roles"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-backups",name:"View your backups",route:"/project/".concat(t,"/database/backups/scheduled"),icon:()=>(0,a.jsx)(ei.A,{})},{id:"run-view-database-migrations",name:"View your migrations",route:"/project/".concat(t,"/database/migrations"),icon:()=>(0,a.jsx)(el.A,{})}],{...e,deps:[t],orderSection:y,sectionMeta:{priority:3}})}({enabled:w}),!function(e){var t;let{ref:n}=(0,s.g)();n||(n="_"),x("Actions",[{id:"create-rls-policy",name:"Create RLS policy",value:"Create RLS (Row Level Security) policy",route:"/project/".concat(n,"/auth/policies"),icon:()=>(0,a.jsx)(er.A,{})}],{...e,deps:[n],enabled:(null==(t=null==e?void 0:e.enabled)||t)&&"_"!==n,orderSection:y,sectionMeta:{priority:3}}),x(v.NAVIGATE,[{id:"nav-auth-users",name:"Users",value:"Auth: Users",route:"/project/".concat(n,"/auth/users"),defaultHidden:!0},{id:"nav-auth-policies",name:"Policies",value:"Auth: Policies (RLS)",route:"/project/".concat(n,"/auth/policies"),defaultHidden:!0},{id:"nav-auth-providers",name:"Providers",value:"Auth: Providers (Social Login, SSO)",route:"/project/".concat(n,"/auth/providers"),defaultHidden:!0},{id:"nav-auth-providers",name:"Providers (Third Party)",value:"Auth: Providers (Third Party)",route:"/project/".concat(n,"/auth/third-party"),defaultHidden:!0},{id:"nav-auth-sessions",name:"Sessions",value:"Auth: Sessions (User Sessions)",route:"/project/".concat(n,"/auth/sessions"),defaultHidden:!0},{id:"nav-auth-rate-limits",name:"Rate Limits",value:"Auth: Rate Limits",route:"/project/".concat(n,"/auth/rate-limits"),defaultHidden:!0},{id:"nav-auth-templates",name:"Email Templates",value:"Auth: Email Templates",route:"/project/".concat(n,"/auth/templates"),defaultHidden:!0},{id:"nav-auth-mfa",name:"Multi Factor Authentication (MFA)",value:"Auth: Multi Factor Authenticaiton (MFA)",route:"/project/".concat(n,"/auth/mfa"),defaultHidden:!0},{id:"nav-auth-url-configuration",name:"URL Configuration",value:"Auth: URL Configuration (Site URL, Redirect URLs)",route:"/project/".concat(n,"/auth/url-configuration"),defaultHidden:!0},{id:"nav-auth-attack-protection",name:"Attack Protection",value:"Auth: Attack Protection",route:"/project/".concat(n,"/auth/protection"),defaultHidden:!0},{id:"nav-auth-auth-hooks",name:"Auth Hooks",value:"Auth: Auth Hooks",route:"/project/".concat(n,"/auth/hooks"),defaultHidden:!0},{id:"nav-auth-advanced-settings",name:"Auth Advanced Settings",value:"Auth: Advanced Settings",route:"/project/".concat(n,"/auth/advanced"),defaultHidden:!0}],{...e,deps:[n]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-advisors-security",name:"Security Advisor",route:"/project/".concat(t,"/advisors/security"),defaultHidden:!0},{id:"nav-advisors-performance",name:"Performance Advisor",route:"/project/".concat(t,"/advisors/performance"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-storage",name:"Storage",route:"/project/".concat(t,"/storage"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-functions",name:"Edge Functions",route:"/project/".concat(t,"/functions"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-logs-explorer",name:"Logs Explorer",route:"/project/".concat(t,"/logs/explorer"),defaultHidden:!0},{id:"nav-logs-postgres",name:"Postgres Logs",route:"/project/".concat(t,"/logs/postgres-logs"),defaultHidden:!0},{id:"nav-logs-postgrest",name:"PostgREST Logs",route:"/project/".concat(t,"/logs/postgrest-logs"),defaultHidden:!0},{id:"nav-logs-pooler",name:"Pooler Logs",route:"/project/".concat(t,"/logs/pooler-logs"),defaultHidden:!0},{id:"nav-logs-auth",name:"Auth Logs",route:"/project/".concat(t,"/logs/auth-logs"),defaultHidden:!0},{id:"nav-logs-storage",name:"Storage Logs",route:"/project/".concat(t,"/logs/storage-logs"),defaultHidden:!0},{id:"nav-logs-realtime",name:"Realtime Logs",route:"/project/".concat(t,"/logs/realtime-logs"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-reports",name:"Reports",route:"/project/".concat(t,"/reports"),defaultHidden:!0},{id:"nav-reports-api",name:"API Reports",route:"/project/".concat(t,"/reports/api-overview"),defaultHidden:!0},{id:"nav-reports-storage",name:"Storage Reports",route:"/project/".concat(t,"/reports/storage"),defaultHidden:!0},{id:"nav-reports-database",name:"Database Reports",route:"/project/".concat(t,"/reports/database"),defaultHidden:!0},{id:"nav-reports-query-performance",name:"Query Performance Reports",route:"/project/".concat(t,"/reports/query-performance"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-api",name:"Project API Docs",route:"/project/".concat(t,"/api"),defaultHidden:!0},{id:"nav-api-auth",name:"Auth Docs",route:"/project/".concat(t,"/api?page=auth"),defaultHidden:!0},{id:"nav-api-user-management",name:"User Management Docs",route:"/project/".concat(t,"/api?page=users-management"),defaultHidden:!0},{id:"nav-api-graphql",name:"GraphQL Docs",route:"/project/".concat(t,"/api/graphiql"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_"),x(v.NAVIGATE,[{id:"nav-project-settings-general",name:"General Settings",route:"/project/".concat(t,"/settings/general"),defaultHidden:!0},{id:"nav-project-settings-database",name:"Database Settings",route:"/project/".concat(t,"/settings/database"),defaultHidden:!0},{id:"nav-project-settings-auth",name:"Auth Settings",route:"/project/".concat(t,"/auth/providers"),defaultHidden:!0},{id:"nav-project-settings-api",name:"API Settings",route:"/project/".concat(t,"/settings/api"),defaultHidden:!0},{id:"nav-project-settings-storage",name:"Storage Settings",route:"/project/".concat(t,"/settings/storage"),defaultHidden:!0},{id:"nav-project-settings-custom-domains",name:"Custom Domains",route:"/project/".concat(t,"/settings/general#custom-domains"),defaultHidden:!0},{id:"nav-project-settings-restart-project",name:"Restart project",route:"/project/".concat(t,"/settings/general#restart-project"),defaultHidden:!0},{id:"nav-project-settings-pause-project",name:"Pause project",route:"/project/".concat(t,"/settings/general#pause-project"),defaultHidden:!0},{id:"nav-project-settings-transfer-project",name:"Transfer project",route:"/project/".concat(t,"/settings/general#transfer-project"),defaultHidden:!0},{id:"nav-project-settings-delete-project",name:"Delete project",route:"/project/".concat(t,"/settings/general#delete-project"),defaultHidden:!0},{id:"nav-project-settings-database-password",name:"Database password",route:"/project/".concat(t,"/settings/general#database-password"),defaultHidden:!0},{id:"nav-project-settings-connection-string",name:"Connection string",route:"/project/".concat(t,"/settings/general#connection-string"),defaultHidden:!0},{id:"nav-project-settings-connection-pooling",name:"Connection pooling",route:"/project/".concat(t,"/settings/general#connection-pooling"),defaultHidden:!0},{id:"nav-project-settings-ssl-configuration",name:"SSL configuration",route:"/project/".concat(t,"/settings/general#ssl-configuration"),defaultHidden:!0},{id:"nav-project-settings-network-restrictions",name:"Network restrictions",route:"/project/".concat(t,"/settings/database#network-restrictions"),defaultHidden:!0},{id:"nav-project-settings-banned-ips",name:"Banned IPs",route:"/project/".concat(t,"/settings/database#banned-ips"),defaultHidden:!0},{id:"nav-project-settings-log-drains",name:"Log drains",route:"/project/".concat(t,"/settings/log-drains"),defaultHidden:!0}],{...e,deps:[t]})}({enabled:w}),!function(e){let{ref:t}=(0,s.g)();t||(t="_");let n=e=>{switch(e.id){case"cron":return"View and manage your Cron Jobs";case"graphiql":return"Query database using GraphQL";case"vault":return"View and manage your keys and secrets via Vault";default:return"View and manage your ".concat(e.name).concat("wrapper"===e.type?"s":"")}};x(v.NAVIGATE,ed.o.map(e=>({id:"nav-integrations-".concat(e.id),name:e.name,value:"Integrations: ".concat(e.name),route:"/project/".concat(t,"/integrations/").concat(e.id,"/overview"),defaultHidden:!0})),{...e,deps:[t]}),x(v.INTEGRATIONS,ed.o.map(e=>({id:"manage-".concat(e.id),name:n(e),route:"/project/".concat(t,"/integrations/").concat(e.id,"/overview"),icon:()=>(0,a.jsx)("div",{className:"w-6 h-6 relative bg-white border rounded-md flex items-center justify-center [&>img]:!p-1 [&>svg]:!p-1",children:e.icon()})})),{...e,deps:[t],orderSection:y,sectionMeta:{priority:3}})}({enabled:w}),e0({options:{orderSection:y,sectionMeta:{priority:3}}}),eO({options:{orderSection:y,sectionMeta:{priority:3}}}),tm(),ev({enabled:s.pe}),e8(),(0,a.jsxs)(T.BM,{"data-sentry-element":"CommandMenu","data-sentry-component":"StudioCommandMenu","data-sentry-source-file":"CommandMenu.tsx",children:[(0,a.jsx)(L,{"data-sentry-element":"CommandHeader","data-sentry-source-file":"CommandMenu.tsx",children:(0,a.jsx)(D,{"data-sentry-element":"CommandInput","data-sentry-source-file":"CommandMenu.tsx"})}),(0,a.jsx)(eh,{"data-sentry-element":"CommandList","data-sentry-source-file":"CommandMenu.tsx"})]})}},79802:(e,t,n)=>{n.d(t,{v:()=>a});let a={list:(e,t,n)=>["projects",e,"tables",t,n].filter(Boolean),retrieve:(e,t,n)=>["projects",e,"tables",n,t].filter(Boolean),rolesAccess:(e,t,n)=>["projects",e,"roles-access",{schema:t,table:n}]}},93057:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(80263),s=n(53239),r=n(1933),o=n(12185),i=n(64491),c=n(50526),l=n(3333),d=n(5548),u=n(37356),m=n(82457),p=n(37263),g=n(48492);function h(e){let{autoComplete:t,autoFocus:n,className:h,inputClassName:f,iconContainerClassName:x,copy:v,defaultValue:y,descriptionText:b,disabled:j,error:_,icon:w,id:S="",name:A="",inputRef:N,label:k,afterLabel:C,beforeLabel:I,labelOptional:q,layout:E,onChange:H,onBlur:R,onCopy:P,placeholder:T,type:L="text",value:M,style:D,reveal:z=!1,actions:G,size:$="medium",borderless:O=!1,validation:V,...Q}=e,[U,W]=(0,s.useState)("Copy"),[B,F]=(0,s.useState)(!0),J=(0,d.A)("input"),{formContextOnChange:K,values:Y,errors:X,handleBlur:Z,touched:ee,fieldLevelValidation:et}=(0,g.x)();Y&&!M&&(M=Y[S||A]),_||(X&&!_&&(_=X[S||A]),_=ee&&ee[S]?_:void 0),(0,s.useEffect)(()=>{V&&et(S,V(M))},[]);let en=["peer/input",J.base];return _&&en.push(J.variants.error),_||en.push(J.variants.standard),$&&en.push(J.size[$]),w&&en.push(J.with_icon),j&&en.push(J.disabled),f&&en.push(f),(0,a.jsx)(o.H,{label:k,afterLabel:C,beforeLabel:I,labelOptional:q,layout:E,id:S,error:_,descriptionText:b,style:D,size:$,className:h,"data-sentry-element":"FormLayout","data-sentry-component":"Input","data-sentry-source-file":"Input.tsx",children:(0,a.jsxs)("div",{className:J.container,children:[(0,a.jsx)("input",{"data-size":$,autoComplete:t,autoFocus:n,defaultValue:y,disabled:j,id:S,name:A,onChange:function(e){H&&H(e),K&&K(e),V&&et(S,V(e.target.value))},onBlur:function(e){Z&&setTimeout(()=>{Z(e)},100),R&&R(e)},onCopy:P,placeholder:T,ref:N,type:L,value:z&&B?l.ne:M,className:(0,m.cn)(en),...Q}),w&&(0,a.jsx)(c.A,{size:$,icon:w,className:x}),v||_||G?(0,a.jsxs)("div",{className:J.actions_container,children:[_&&(0,a.jsx)(i.A,{size:$}),v&&!(z&&B)?(0,a.jsx)(p.$,{size:"tiny",type:"default",icon:(0,a.jsx)(r.A,{}),onClick:()=>{var e;return e=M,void(0,u.l)(e,()=>{W("Copied"),setTimeout(()=>{W("Copy")},3e3),null==P||P()})},children:U}):null,z&&B?(0,a.jsx)(p.$,{size:"tiny",type:"default",onClick:function(){F(!1)},children:"Reveal"}):null,G&&G]}):null]})})}h.TextArea=function(e){let{className:t,textAreaClassName:n,descriptionText:c,disabled:l,error:m,icon:h,id:f="",name:x="",label:v,afterLabel:y,beforeLabel:b,labelOptional:j,layout:_,onChange:w,onBlur:S,placeholder:A,value:N,style:k,rows:C=4,limit:I,size:q,borderless:E=!1,validation:H,copy:R=!1,onCopy:P,actions:T,...L}=e,[M,D]=(0,s.useState)(0),[z,G]=(0,s.useState)("Copy"),{formContextOnChange:$,values:O,errors:V,handleBlur:Q,touched:U,fieldLevelValidation:W}=(0,g.x)();O&&!N&&(N=O[f||x]),m||(V&&!m&&(m=V[f||x]),m=U&&U[f||x]?m:void 0),(0,s.useEffect)(()=>{H&&W(f,H(N))},[]);let B=(0,d.A)("input"),F=[B.base];return m&&F.push(B.variants.error),m||F.push(B.variants.standard),h&&F.push(B.with_icon),q&&F.push(B.size[q]),l&&F.push(B.disabled),n&&F.push(n),(0,a.jsx)(o.H,{className:t,label:v,afterLabel:y,beforeLabel:b,labelOptional:j,layout:_,id:f,error:m,descriptionText:c,style:k,size:q,"data-sentry-element":"FormLayout","data-sentry-component":"TextArea","data-sentry-source-file":"Input.tsx",children:(0,a.jsxs)("div",{className:B.container,children:[(0,a.jsx)("textarea",{disabled:l,id:f,name:x,rows:C,cols:100,placeholder:A,onChange:function(e){D(e.target.value.length),w&&w(e),$&&$(e),H&&W(f,H(e.target.value))},onBlur:function(e){Q&&setTimeout(()=>{Q(e)},100),S&&S(e)},onCopy:P,value:N,className:F.join(" "),maxLength:I,...L}),R||m||T?(0,a.jsx)("div",{className:B.textarea_actions_container,children:(0,a.jsxs)("div",{className:B.textarea_actions_container_items,children:[m&&(0,a.jsx)(i.A,{size:q}),R&&(0,a.jsx)(p.$,{size:"tiny",type:"default",onClick:()=>{var e;return e=N,void(0,u.l)(e,()=>{G("Copied"),setTimeout(()=>{G("Copy")},3e3),null==P||P()})},icon:(0,a.jsx)(r.A,{}),children:z}),T&&T]})}):null]})})};let f=h},96622:(e,t,n)=>{n.d(t,{Lh:()=>u,T_:()=>h});var a=n(32144),s=n(80251),r=n(73969),o=n(26616),i=n.n(o),c=n(18232),l=n(46065),d=n(67394);let u="pgmq_public",m=i()("\ncreate schema if not exists ".concat(u,";\ngrant usage on schema ").concat(u," to postgres, anon, authenticated, service_role;\n\ncreate or replace function ").concat(u,".pop(\n    queue_name text\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.pop(\n        queue_name := queue_name\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".pop(queue_name text) is 'Retrieves and locks the next message from the specified queue.';\n\n\ncreate or replace function ").concat(u,".send(\n    queue_name text,\n    message jsonb,\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send(\n        queue_name := queue_name,\n        msg := message,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer) is 'Sends a message to the specified queue, optionally delaying its availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".send_batch(\n    queue_name text,\n    messages jsonb[],\n    sleep_seconds integer default 0  -- renamed from 'delay'\n)\n  returns setof bigint\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.send_batch(\n        queue_name := queue_name,\n        msgs := messages,\n        delay := sleep_seconds\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".send_batch(queue_name text, messages jsonb[], sleep_seconds integer) is 'Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.';\n\n\ncreate or replace function ").concat(u,".archive(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.archive(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".archive(queue_name text, message_id bigint) is 'Archives a message by moving it from the queue to a permanent archive.';\n\n\ncreate or replace function ").concat(u,".delete(\n    queue_name text,\n    message_id bigint\n)\n  returns boolean\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return\n    pgmq.delete(\n        queue_name := queue_name,\n        msg_id := message_id\n    );\nend;\n$$;\n\ncomment on function ").concat(u,".delete(queue_name text, message_id bigint) is 'Permanently deletes a message from the specified queue.';\n\ncreate or replace function ").concat(u,".read(\n    queue_name text,\n    sleep_seconds integer,\n    n integer\n)\n  returns setof pgmq.message_record\n  language plpgsql\n  set search_path = ''\nas $$\nbegin\n    return query\n    select *\n    from pgmq.read(\n        queue_name := queue_name,\n        vt := sleep_seconds,\n        qty := n\n    );\nend;\n$$;\n\ncomment on function ").concat(u,'.read(queue_name text, sleep_seconds integer, n integer) is \'Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).\';\n\n-- Grant execute permissions on wrapper functions to roles\ngrant execute on function ').concat(u,".pop(text) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.pop(text) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send(text, jsonb, integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.send_batch(text, jsonb[], integer) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".archive(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.archive(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".delete(text, bigint) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.delete(text, bigint) to postgres, service_role, anon, authenticated;\n\ngrant execute on function ").concat(u,".read(text, integer, integer) to postgres, service_role, anon, authenticated;\ngrant execute on function pgmq.read(text, integer, integer) to postgres, service_role, anon, authenticated;\n\n-- For the service role, we want full access\n-- Grant permissions on existing tables\ngrant all privileges on all tables in schema pgmq to postgres, service_role;\n\n-- Ensure service_role has permissions on future tables\nalter default privileges in schema pgmq grant all privileges on tables to postgres, service_role;\n\ngrant usage on schema pgmq to postgres, anon, authenticated, service_role;\n\n\n/*\n  Grant access to sequences to API roles by default. Existing table permissions\n  continue to enforce insert restrictions. This is necessary to accommodate the\n  on-backup hook that rebuild queue table primary keys to avoid a pg_dump segfault.\n  This can be removed once logical backups are completely retired.\n*/\ngrant usage, select, update\non all sequences in schema pgmq\nto anon, authenticated, service_role;\n\nalter default privileges in schema pgmq\ngrant usage, select, update\non sequences\nto anon, authenticated, service_role;\n")),p=i()("\n  drop function if exists \n    ".concat(u,".pop(queue_name text),\n    ").concat(u,".send(queue_name text, message jsonb, sleep_seconds integer),\n    ").concat(u,".send_batch(queue_name text, message jsonb[], sleep_seconds integer),\n    ").concat(u,".archive(queue_name text, message_id bigint),\n    ").concat(u,".delete(queue_name text, message_id bigint),\n    ").concat(u,".read(queue_name text, sleep integer, n integer)\n  ;\n\n  -- Revoke execute permissions on inner pgmq functions to roles (inverse of enabling)\n  do $$\n  begin\n      if exists (select 1 from pg_namespace where nspname = 'pgmq') then\n          -- Revoke privileges on the schema itself\n          revoke all on schema pgmq from anon, authenticated, service_role;\n          \n          -- Revoke default privileges for future objects\n          alter default privileges in schema pgmq revoke all on tables from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on sequences from anon, authenticated, service_role;\n          alter default privileges in schema pgmq revoke all on functions from anon, authenticated, service_role;\n      end if;\n  end $$;\n\n  drop schema if exists ").concat(u,";\n"));async function g(e){let{projectRef:t,connectionString:n,enable:a}=e,{result:s}=await (0,c.E)({projectRef:t,connectionString:n,sql:a?m:p,queryKey:["toggle-queues-exposure"]});return s}let h=function(){let{onSuccess:e,onError:t,...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=(0,a.jE)();return(0,s.n)(e=>g(e),{async onSuccess(t,n,a){let{projectRef:s}=n;await o.invalidateQueries(l.m.exposePostgrestStatus(s)),o.invalidateQueries(d.c.schemas(s)),await (null==e?void 0:e(t,n,a))},async onError(e,n,a){void 0===t?r.oR.error("Failed to toggle queue exposure via PostgREST: ".concat(e.message)):t(e,n,a)},...n})}},96993:(e,t,n)=>{n.d(t,{Ay:()=>l});var a=n(80263),s=n(39383);n(53239);var r=n(37263),o=n(85462),i=n(5548);let c=e=>{let{id:t,disabled:n,className:c,children:l,header:d,visible:u,open:m,size:p="medium",loading:g,align:h="right",hideFooter:f=!1,customFooter:x,onConfirm:v,onCancel:y,confirmText:b="Confirm",cancelText:j="Cancel",triggerElement:_,defaultOpen:w,tooltip:S,...A}=e,N=(0,i.A)("sidepanel"),k=x||(0,a.jsxs)("div",{className:N.footer,children:[(0,a.jsx)("div",{children:(0,a.jsx)(r.$,{disabled:g,type:"default",onClick:()=>y?y():null,children:j})}),void 0!==v&&(0,a.jsxs)(o.m_,{children:[(0,a.jsx)(o.k$,{asChild:!0,children:(0,a.jsx)("span",{className:"inline-block",children:(0,a.jsx)(r.$,{htmlType:"submit",disabled:n||g,loading:g,onClick:()=>v?v():null,children:b})})}),void 0!==S&&(0,a.jsx)(o.ZI,{side:"bottom",children:S})]})]});return m=m||u,(0,a.jsxs)(s.bL,{open:m,onOpenChange:function(e){void 0!==u&&!e&&y&&y()},defaultOpen:w,"data-sentry-element":"unknown","data-sentry-component":"SidePanel","data-sentry-source-file":"SidePanel.tsx",children:[_&&(0,a.jsx)(s.l9,{asChild:!0,className:N.trigger,children:_}),(0,a.jsxs)(s.ZL,{"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[(0,a.jsx)(s.hJ,{className:N.overlay,"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx"}),(0,a.jsxs)(s.UC,{className:[N.base,N.size[p],N.align[h],c&&c].join(" "),onOpenAutoFocus:A.onOpenAutoFocus,onCloseAutoFocus:A.onCloseAutoFocus,onEscapeKeyDown:A.onEscapeKeyDown,onPointerDownOutside:A.onPointerDownOutside,onInteractOutside:e=>{var t;(null==(t=e.target)?void 0:t.closest("#toast"))&&e.preventDefault(),A.onInteractOutside&&A.onInteractOutside(e)},"data-sentry-element":"unknown","data-sentry-source-file":"SidePanel.tsx",children:[d&&(0,a.jsx)("header",{className:N.header,children:d}),(0,a.jsx)("div",{className:N.contents,children:l}),!f&&k]})]})]})};c.Content=function(e){let{children:t,className:n}=e,s=(0,i.A)("sidepanel");return(0,a.jsx)("div",{className:[s.content,n].join(" ").trim(),"data-sentry-component":"Content","data-sentry-source-file":"SidePanel.tsx",children:t})},c.Separator=function(){let e=(0,i.A)("sidepanel");return(0,a.jsx)("div",{className:e.separator,"data-sentry-component":"Separator","data-sentry-source-file":"SidePanel.tsx"})};let l=c}}]);