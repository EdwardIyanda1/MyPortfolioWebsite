!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="b4b82ea3-47a6-4c32-966c-38af60ee4e7a",e._sentryDebugIdIdentifier="sentry-dbid-b4b82ea3-47a6-4c32-966c-38af60ee4e7a")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4598,9056],{6877:e=>{e.exports={loading:"loading-anim_loading__rDN7u",dash:"loading-anim_dash__HIPR0"}},12318:(e,t,r)=>{"use strict";r.d(t,{i:()=>u});var a=r(55422),n=r(32144),s=r(80251),i=r(73969),l=r(2329),o=r(23866);let c=["Invalid TOTP code entered"],d=async e=>{let{error:t,data:r}=await l.j2.mfa.challengeAndVerify(e);if(t)throw t;return r},u=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,n.jE)();return(0,s.n)(e=>{let{refreshFactors:t,...r}=e;return d(r)},{async onSuccess(t,r,a){var n;let s=null==(n=r.refreshFactors)||n;await Promise.all([...s?[l.invalidateQueries(o.e.mfaFactors())]:[],l.invalidateQueries(o.e.aaLevel())]),await (null==e?void 0:e(t,r,a))},async onError(e,r,n){void 0===t?i.oR.error("Failed to sign in: ".concat(e.message)):t(e,r,n),c.some(t=>e.message.includes(t))||a.wd("[CRITICAL] Failed to sign in via MFA: "+e.message)},...r})}},31233:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>E});var a=r(80263),n=r(32144),s=r(87355),i=r(53239),l=r(73969),o=r(25481),c=r(71147),d=r(8758),u=r.n(d),f=r(86692),m=r(80948),g=r(56259),h=r(12318),y=r(94215),x=r(95662),v=r(2329),p=r(12523),j=r(93057),w=r(37263);let L=(0,f.object)({code:(0,f.string)().required("MFA Code is required")}),b=()=>{var e;let t=(0,s.useRouter)(),r=(0,x.Rt)(),l=(0,n.jE)(),[o,d]=(0,i.useState)(null),{data:f,error:b,isError:_,isSuccess:N,isLoading:A}=(0,y.a)(),{mutate:S,isLoading:k,isSuccess:E}=(0,h.i)({onSuccess:async()=>{await l.resetQueries(),t.push((0,v.lf)())}}),C=async()=>{await r(),await t.replace("/sign-in")},F=async e=>{let{code:t}=e;o&&S({factorId:o.id,code:t,refreshFactors:!1})};return(0,i.useEffect)(()=>{N&&(0===f.totp.length&&l.resetQueries().then(()=>t.push((0,v.lf)())),f.totp.length>0&&d(f.totp[0]))},[null==f?void 0:f.totp,N,t,l]),(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)(g.y,{}),_&&(0,a.jsx)(m.A,{error:b,subject:"Failed to retrieve factors"}),N&&(0,a.jsx)(p.A,{validateOnBlur:!0,id:"sign-in-mfa-form",initialValues:{code:""},validationSchema:L,onSubmit:F,children:()=>(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(j.A,{id:"code",name:"code",type:"text",autoFocus:!0,icon:(0,a.jsx)(c.A,{}),placeholder:"XXXXXX",disabled:k,autoComplete:"off",spellCheck:"false",autoCapitalize:"none",autoCorrect:"off",label:o&&(null==f?void 0:f.totp.length)===2?"Code generated by ".concat(o.friendly_name):null}),(0,a.jsxs)("div",{className:"flex items-center justify-between space-x-2",children:[(0,a.jsx)(w.$,{block:!0,type:"outline",size:"large",disabled:k||E,onClick:C,className:"opacity-80 hover:opacity-100 transition",children:"Cancel"}),(0,a.jsx)(w.$,{block:!0,form:"sign-in-mfa-form",htmlType:"submit",size:"large",disabled:k||E,loading:k||E,children:k?"Verifying":E?"Signing in":"Verify"})]})]})})}),(0,a.jsxs)("div",{className:"my-8",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("span",{className:"text-foreground-light",children:"Unable to sign in?"})," "]}),(0,a.jsxs)("ul",{className:"list-disc pl-6",children:[(null==f?void 0:f.totp.length)===2&&(0,a.jsx)("li",{children:(0,a.jsx)("a",{className:"text-sm text-foreground-light hover:text-foreground cursor-pointer",onClick:()=>d(f.totp.find(e=>e.id!==(null==o?void 0:o.id))),children:"Authenticate using ".concat(null==(e=f.totp.find(e=>e.id!==(null==o?void 0:o.id)))?void 0:e.friendly_name,"?")})}),(0,a.jsx)("li",{children:(0,a.jsx)(u(),{href:"/logout","data-sentry-element":"Link","data-sentry-source-file":"SignInMfaForm.tsx",children:"Force sign out and clear cookies"})}),(0,a.jsx)("li",{children:(0,a.jsx)(u(),{target:"_blank",rel:"noreferrer",href:"/support/new?subject=Unable+to+sign+in+via+MFA&category=Login_issues",className:"text-sm transition text-foreground-light hover:text-foreground","data-sentry-element":"Link","data-sentry-source-file":"SignInMfaForm.tsx",children:"Reach out to us via support"})})]})]})]})};var _=r(81686),N=r(90355),A=r(48044),S=r(50689),k=r(26413);let E=()=>{let e=(0,s.useRouter)(),t=(0,n.jE)(),{method:r="unknown"}=(0,o.g)(),c=(0,k.A)(r),{mutate:d}=(0,S.h)(),{mutate:u}=(0,A.C)(),[f,m]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{v.j2.initialize().then(async r=>{let{error:a}=r;if(a)return void m(!1);if(await (0,v.iD)()){let{data:r,error:a}=await v.j2.mfa.getAuthenticatorAssuranceLevel();if(a)return l.oR.error("Failed to retrieve assurance level: ".concat(a.message,". Please try signing in again")),m(!1),e.push({pathname:"/sign-in",query:e.query});if(r.currentLevel===r.nextLevel){d({action:"sign_in",properties:{category:"account",method:c.current}}),u({}),await t.resetQueries(),e.push((0,v.lf)());return}if(r.currentLevel!==r.nextLevel)return void m(!1)}else{let t=(0,v.A_)("/sign-in");e.replace(t);return}}).catch(()=>{})},[]),f)?(0,a.jsx)("div",{className:"flex flex-col flex-1 bg-alternative h-screen items-center justify-center",children:(0,a.jsx)(N.A,{})}):(0,a.jsx)(_.A,{heading:"Two-factor authentication",subheading:"Enter the authentication code from your two-factor authentication app",logoLinkToMarketingSite:!0,"data-sentry-element":"SignInLayout","data-sentry-component":"SignInMfaPage","data-sentry-source-file":"sign-in-mfa.tsx",children:(0,a.jsx)("div",{className:"flex flex-col gap-5",children:(0,a.jsx)(b,{"data-sentry-element":"SignInMfaForm","data-sentry-source-file":"sign-in-mfa.tsx"})})})}},48044:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var a=r(55422),n=r(80251),s=r(73969),i=r(48678);async function l(){let{error:e}=await (0,i.bE)("/platform/profile/audit-login");e&&(0,i.H4)(e)}let o=function(){let{onSuccess:e,onError:t,...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.n)(e=>l(),{async onSuccess(t,r,a){await (null==e?void 0:e(t,r,a))},async onError(e,r,n){a.Cp(Error("Failed to add login event to user's audit log",{cause:e})),void 0===t?s.oR.error("Failed to add login event: ".concat(e.message)):t(e,r,n)},...r})}},56259:(e,t,r)=>{"use strict";r.d(t,{y:()=>c,A:()=>d});var a=r(80263),n=r(25481),s=r(53239);let i=null;var l=r(82457);let o=e=>{let{className:t,delayIndex:r=0,animationDelay:o=150}=e,c=function(e){let t=(0,s.useRef)(null);return(0,n.Es)(()=>{let e=document.getAnimations().filter(e=>e instanceof CSSAnimation&&"shimmer"===e.animationName),r=e.find(e=>e.effect instanceof KeyframeEffect&&e.effect.target===t.current);if(void 0===r)return;let a=e[0];return r===a&&i&&(r.currentTime=i),r!==a&&(r.currentTime=a.currentTime),()=>{r===a&&r.currentTime&&(i=Number(r.currentTime))}},[]),t}(0);return(0,a.jsx)("div",{ref:c,className:(0,l.cn)("shimmering-loader rounded py-3",t),style:{animationFillMode:"backwards",animationDelay:"".concat(r*o,"ms")},"data-sentry-component":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"})},c=()=>(0,a.jsxs)("div",{className:"space-y-2","data-sentry-component":"GenericSkeletonLoader","data-sentry-source-file":"ShimmeringLoader.tsx",children:[(0,a.jsx)(o,{"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"}),(0,a.jsx)(o,{className:"w-3/4",delayIndex:1,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"}),(0,a.jsx)(o,{className:"w-1/2",delayIndex:2,"data-sentry-element":"ShimmeringLoader","data-sentry-source-file":"ShimmeringLoader.tsx"})]}),d=o},68460:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/sign-in-mfa",function(){return r(31233)}])},71147:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(84497).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},80948:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(80263),n=r(8758),s=r.n(n),i=r(96773),l=r(58173),o=r(37263);let c=e=>{var t;let{projectRef:r,subject:n,error:c,className:d,showIcon:u=!0,children:f}=e,m=null==n?void 0:n.replace(/ /g,"%20"),g="/support/new?category=dashboard_bug";r&&(g+="&ref=".concat(r)),m&&(g+="&subject=".concat(m)),c&&(g+="&error=".concat(c.message));let h=(null==c||null==(t=c.message)?void 0:t.includes("503"))?"503 Service Temporarily Unavailable":null==c?void 0:c.message;return(0,a.jsxs)(i.Fc,{className:d,variant:"warning",title:n,"data-sentry-element":"Alert_Shadcn_","data-sentry-component":"AlertError","data-sentry-source-file":"AlertError.tsx",children:[u&&(0,a.jsx)(l.id,{className:"h-4 w-4",strokeWidth:2}),(0,a.jsx)(i.XL,{className:"text-foreground","data-sentry-element":"AlertTitle_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:n}),(0,a.jsxs)(i.TN,{className:"flex flex-col gap-3 break-words","data-sentry-element":"AlertDescription_Shadcn_","data-sentry-source-file":"AlertError.tsx",children:[(0,a.jsxs)("div",{children:[(null==c?void 0:c.message)&&(0,a.jsxs)("p",{className:"text-left",children:["Error: ",h]}),(0,a.jsx)("p",{className:"text-left",children:"Try refreshing your browser, but if the issue persists for more than a few minutes, please reach out to us via support."})]}),f,(0,a.jsx)(o.$,{asChild:!0,type:"warning",className:"w-min","data-sentry-element":"Button","data-sentry-source-file":"AlertError.tsx",children:(0,a.jsx)(s(),{href:g,"data-sentry-element":"Link","data-sentry-source-file":"AlertError.tsx",children:"Contact support"})})]})]})}},90355:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(80263),n=r(6877),s=r.n(n);let i=()=>(0,a.jsx)("div",{className:"w-full h-full flex flex-col items-center justify-center","data-sentry-component":"LogoLoader","data-sentry-source-file":"LogoLoader.tsx",children:(0,a.jsx)("div",{children:(0,a.jsx)("svg",{width:"60",height:"62",viewBox:"0 0 60 62",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:s().loading,"data-sentry-element":"svg","data-sentry-source-file":"LogoLoader.tsx",children:(0,a.jsx)("path",{d:"M30.2571 4.12811L30.257 4.12389C30.2133 1.21067 26.5349 -0.034778 24.7224 2.24311L1.76109 31.0996C-1.21104 34.8348 1.45637 40.34 6.23131 40.34H29.4845L29.7563 58.4432C29.8 61.3564 33.4783 62.6016 35.2908 60.324L34.8996 60.0127L35.2908 60.324L58.2521 31.4674C61.2241 27.7322 58.5568 22.227 53.782 22.227H30.3762L30.2571 4.12811Z",stroke:"hsl(var(--brand-default))",strokeWidth:2,strokeLinecap:"round","data-sentry-element":"path","data-sentry-source-file":"LogoLoader.tsx"})})})})},94215:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var a=r(56947),n=r(2329),s=r(23866);async function i(){let{error:e,data:t}=await n.j2.mfa.listFactors();if(e)throw e;return t}let l=function(){let{enabled:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.I)(s.e.mfaFactors(),()=>i(),{staleTime:18e5,...t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2491,9377,6692,213,6593,636,8792],()=>t(68460)),_N_E=e.O()}]);